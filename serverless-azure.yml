service: sls-movie-api

configValidationMode: off

provider:
  name: azure
  resourceGroup: sls-movie-api
  location: East US
  runtime: nodejs14
  apim: true

functions:
  graphql:
    handler: src/apollo-server-azure-functions.graphqlHandler
    events:
      - http:
          method: POST
        x-azure-settings:
          authLevel: anonymous
      - http: true
        x-azure-settings:
          direction: out
          name: $return

plugins:
  - serverless-webpack
  - serverless-azure-functions

custom:
  webpack:
    includeModules: true
